{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Camera } from 'expo-camera';\nimport React, { useEffect, useState } from 'react';\nimport { getDownloadURL, getStorage, listAll, ref, uploadBytes } from 'firebase/storage';\nimport app from \"../firebaseConfig.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Fotos() {\n  var _ref2, _ref3;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    temPermissao = _useState2[0],\n    setTemPermissao = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    camera = _useState4[0],\n    setCamera = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    uri = _useState6[0],\n    setUri = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    galeria = _useState8[0],\n    setGaleria = _useState8[1];\n  var _useState9 = useState([]),\n    _useState10 = _slicedToArray(_useState9, 2),\n    urlsGaleria = _useState10[0],\n    setUrlsGaleria = _useState10[1];\n  var storage = getStorage(app);\n  useEffect(function () {\n    var _ref;\n    var getCameraPermission = function getCameraPermission() {\n      return (_ref = _ref || _asyncToGenerator(function* () {\n        var _yield$Camera$request = yield Camera.requestCameraPermissionsAsync(),\n          status = _yield$Camera$request.status;\n        setTemPermissao(status === 'granted');\n      })).apply(this, arguments);\n    };\n    getCameraPermission();\n  }, []);\n  var tirarFoto = function tirarFoto() {\n    return (_ref2 = _ref2 || _asyncToGenerator(function* () {\n      try {\n        if (camera) {\n          var _yield$camera$takePic = yield camera.takePictureAsync(),\n            _uri = _yield$camera$takePic.uri;\n          setUri(_uri);\n        }\n      } catch (error) {\n        console.error(\"Erro ao tirar a foto:\", error);\n      }\n    })).apply(this, arguments);\n  };\n  var enviarFoto = function enviarFoto() {\n    return (_ref3 = _ref3 || _asyncToGenerator(function* () {\n      if (uri) {\n        try {\n          var foto = yield fetch(uri);\n          var fotoBlob = yield foto.blob();\n          var data = new Date();\n          var storageRef = ref(storage, `_foto_eventos_${data.getTime()}.jpg`);\n          yield uploadBytes(storageRef, fotoBlob);\n          setUri(null);\n        } catch (error) {\n          console.error(\"Erro ao enviar a foto:\", error);\n        }\n      }\n    })).apply(this, arguments);\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [!uri && _jsx(Camera, {\n      style: styles.cam,\n      type: Camera.Constants.Type.back,\n      ref: function ref(_ref4) {\n        return setCamera(_ref4);\n      }\n    }), uri && _jsxs(_Fragment, {\n      children: [_jsx(Image, {\n        source: {\n          uri: uri\n        },\n        style: styles.imagem\n      }), _jsx(Pressable, {\n        style: styles.botao,\n        onPress: enviarFoto,\n        children: _jsx(Text, {\n          children: \"Enviar foto\"\n        })\n      })]\n    }), _jsx(Pressable, {\n      style: styles.botao,\n      onPress: tirarFoto,\n      children: _jsx(Text, {\n        children: \"Tirar Foto\"\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 15,\n    alignItems: 'center'\n  },\n  cam: {\n    width: '90%',\n    borderRadius: 5\n  },\n  botao: {\n    backgroundColor: 'lightblue',\n    padding: 15,\n    borderRadius: 5,\n    margin: 15\n  },\n  imagem: {\n    width: 300,\n    height: 300,\n    borderRadius: 5\n  }\n});","map":{"version":3,"names":["Camera","React","useEffect","useState","getDownloadURL","getStorage","listAll","ref","uploadBytes","app","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Fotos","_ref2","_ref3","_useState","_useState2","_slicedToArray","temPermissao","setTemPermissao","_useState3","_useState4","camera","setCamera","_useState5","_useState6","uri","setUri","_useState7","_useState8","galeria","setGaleria","_useState9","_useState10","urlsGaleria","setUrlsGaleria","storage","_ref","getCameraPermission","_asyncToGenerator","_yield$Camera$request","requestCameraPermissionsAsync","status","apply","arguments","tirarFoto","_yield$camera$takePic","takePictureAsync","error","console","enviarFoto","foto","fetch","fotoBlob","blob","data","Date","storageRef","getTime","View","style","styles","container","children","cam","type","Constants","Type","back","Image","source","imagem","Pressable","botao","onPress","Text","StyleSheet","create","flex","padding","alignItems","width","borderRadius","backgroundColor","margin","height"],"sources":["/home/pdro/Documents/VsCodigos/Assessment-DMRN2/screens/Fotos.jsx"],"sourcesContent":["import { StyleSheet, Text, View, Pressable, Image } from 'react-native';\nimport { Camera } from 'expo-camera';\nimport React, { useEffect, useState } from 'react';\nimport { getDownloadURL, getStorage, listAll, ref, uploadBytes } from 'firebase/storage';\nimport app from '../firebaseConfig.js';\n\nexport default function Fotos() {\n    const [temPermissao, setTemPermissao] = useState(null);\n    const [camera, setCamera] = useState(null);\n    const [uri, setUri] = useState(null);\n    const [galeria, setGaleria] = useState(false);\n    const [urlsGaleria, setUrlsGaleria] = useState([]);\n    const storage = getStorage(app);\n\n    useEffect(() => {\n        const getCameraPermission = async () => {\n            const { status } = await Camera.requestCameraPermissionsAsync();\n            setTemPermissao(status === 'granted');\n        };\n\n        getCameraPermission();\n    }, []);\n\n    const tirarFoto = async () => {\n        try {\n          if (camera) {\n            const { uri } = await camera.takePictureAsync();\n            setUri(uri);\n          }\n        } catch (error) {\n          console.error(\"Erro ao tirar a foto:\", error);\n        }\n      };\n\n      const enviarFoto = async () => {\n        if (uri) {\n          try {\n            const foto = await fetch(uri);\n            const fotoBlob = await foto.blob();\n            const data = new Date();\n            const storageRef = ref(storage, `_foto_eventos_${data.getTime()}.jpg`);\n            await uploadBytes(storageRef, fotoBlob);\n            setUri(null);\n          } catch (error) {\n            console.error(\"Erro ao enviar a foto:\", error);\n          }\n        }\n      };\n    // if (galeria) {\n    //     const storageRef = ref(storage);\n        //     const req = listAll(storageRef);\n        //     req.then(listResult => {\n        //         listResult.items.forEach(ref => {\n        //             getDownloadURL(ref)\n        //                 .then(url => {\n        //                     setUrlsGaleria(urlsGaleria.push(url));\n        //                 })\n        //         })\n        //     })\n        // }\n        // getDownloadURL(storageRef, \"yoshi.jpg\")\n        //     .then(url => {\n        //         setUrlsGaleria([...urlsGaleria, url]);\n        //     })\n        // listResult.items.forEach(ref => {   \n        //     getDownloadURL(ref)\n        //         .then(url => {\n        //             setUrlsGaleria(urlsGaleria.push(url));\n        //             })  \n        //         })\n        // return (\n        //     <View style={styles.container}>\n        //         <Pressable onPress={() => setGaleria(!galeria)}>\n        //             <Text>{galeria ? \"True\" : \"False\"}</Text>\n        //         </Pressable>\n        //     </View>\n        // );\n\n    return (\n        <View style={styles.container}>\n            {!uri && (\n                <Camera\n                    style={styles.cam}\n                    type={Camera.Constants.Type.back}\n                    ref={(ref) => setCamera(ref)}\n                />\n            )}\n            {uri && (\n                <>\n                    <Image source={{ uri }} style={styles.imagem} />\n                    <Pressable style={styles.botao} onPress={enviarFoto}>\n                        <Text>Enviar foto</Text>\n                    </Pressable>\n                </>\n            )}\n            <Pressable style={styles.botao} onPress={tirarFoto}>\n                <Text>Tirar Foto</Text>\n            </Pressable>\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        padding: 15,\n        alignItems: 'center',\n    },\n    cam: {\n        width: '90%',\n        borderRadius: 5,\n    },\n    botao: {\n        backgroundColor: 'lightblue',\n        padding: 15,\n        borderRadius: 5,\n        margin: 15,\n    },\n    imagem: {\n        width: 300,\n        height: 300,\n        borderRadius: 5,\n    },\n});\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}